---
title: 헥사고날 아키텍처가 뭘까?
categories:
  - 스프링, MSA
tags:
  - MSA
  - 헥사고날
toc: true
toc_sticky: true
date: 2024-05-01
---
# 헥사고날 아키텍처란? 
>[!note] 레이어드 아키텍처에서 도메인과 외부와의 의존성을 약하게 하기 위해 고안된 구조라고 생각함 의존성을 약하게 하기 위해 Adapter와 Port를 사용하게 됨 따라서 PortAndAdapter아키텍처라고도 함

# 레이어드 아키텍처가 뭐지?
>[!note] 소프트웨어 시스템을 관심사 별로 여러개의 개층으로 분리한 아키텍처

![400](https://velog.velcdn.com/images%2Fgmtmoney2357%2Fpost%2Fe3f432ed-fc02-4ff9-9a55-02c85f6cea6c%2F%E1%84%83%E1%85%A1%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3.png)

## 🤔 위에서 왜 도메인과 외부와의 의존성을 약하게 하기 위해서 헥사고날(의존성을 약하게 하는 구조)를 생각하게 됐을까?

이유는 DDD을 사용하기 때문이다. DDD는 <mark style='background:#f7b731'>도메인 주도 설계</mark>를 의미한다. 하지만 레이어드 아키텍처는 도메인 주도 개발보다는 <mark style='background:#f7b731'>기술적인 부분에 집중</mark>하여 개발을 하는 아키텍처 구조이다. 쉽게 말하자면 하나의 도메인을 변경하려면 <mark style='background:#f7b731'>프레젠테이션, 비즈니스, 서비스, 디비</mark>등 모두 변경을 해야한다. 
🧑🏻‍💻 모두 변경해야 한다는 점에서 외부와의 의존성이 헥사고날보다 강하다고 생각한다. 

💻 https://velog.io/@gmtmoney2357/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A0%88%EC%9D%B4%EC%96%B4%EB%93%9C-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98Layered-architecture
이 블로그를 참고하였습니다. 

# DDD란?
> [!note] Domain Driven Develop, 도메인 주도 설계라고 한다. 도메인 패턴을 중심에 두고 설계하는 소프트웨어 개발 방법론 중 하나

1. 도메인의 모델과 로직에 집중
2. 단일화된 언어체계, 업무 언어를 통일(유비쿼터스 언어) 
	통일된 방식으로 커뮤니케이션, 기획, 개발, 사업까지 전체적인 팀 내부에서 단일화된 커뮤니케이션을 할 수 있음  
	소프트웨어 엔티티와 도메인간의 개념의 일치 

## 도메인이 뭐지?
> [!note] 유사한 업무(행위)의 집합
# 의존성을 약하게 한다는게 뭐지?
> [!notice] 쉽게 말하자면 객체 사이에서 특정 객체가 바뀔 때 객체간 끼치는 영향이 없거나 최소한으로 줄어드는 것을 의미한다. 
## 왜 의존성을약하게 해야할까?
> [!important] 이는 헥사고날을 사용하는 이유이기도 함, 서비스의 핵심 로직이나 또는 도메인 로직은 외부 요소와 결합도가 낮게되면 변경에 대해 유연하게 대처할 수 있음 

# 왜 헥사고날 아키텍처를 Port Adapter아키텍처라고 했을까?
![400](https://i.imgur.com/CaLkFPX.png)
헥사고날 아키텍처 그림인데 port와 adapter를 통해서 구조가 연결하는 것을 알 수 있다. adapter와 port가 뭔지 더 알아보자. 
## Adapter와 Port가 뭐지?
### Adapter?
>[!notice] 직관적인 의미 : 전기 플러그 어댑터 같은 역할, 흔히 한국에서 일본으로 갈때 플러그 규격이 다르기 때문에 이를 이어주는 어댑터를 사용해야 한다. 

 🧑🏻‍💻 정리하자면, 헥사고날 아키텍처에서 어댑터는 애플리케이션 핵심 로직과 외부 사이의 연결고리 역할을 한다. 따라서 포트를 통해외부 요소와 핵심 로직을 연결하는 부분만 담당하는 구현체이다. 

### port?
> [!notice] 외부 요소와 핵심로직을 연결해주는 곳이고 외부 요소를 교체하면서 사용할 수 도 있기에 콘센트(port)라 생각하면 이해가 잘 될 것 같다 

🧑🏻‍💻 정리하자면, 애플리케이션 코어의 경계를 의미, 즉 도메인 로직과 외부 요소의 커뮤니케이션이 일어나는 지점이다. port는 핵심 로직과 외부 시스템간의 직접적인 의존성을 제거(의존성 역전)하기 위해서 인터페이스로 정의한다.

따라서 헥사고날 아키텍처는 결국 port와 adatper가 주요 구조이기에 Port Adatper 아키텍처라고도 하는것 같다. 

---
# 내가 직접 구현해보는 헥사고날 아키텍처
## 회원 가입하기 - 도메인
1. domain -signUp(회원가입 메서드) 먼저 만들기
2. 내가 생각하는 것은 엔티티가 있어야함 즉 엔티티를 받는 port out과 Adapter out가 있어야 함
3. adapter out, port out 중 흐름상 adapter out이 엔티티를 만드는 영역이라 생각하기에 먼저 기능을 구현해야한다 생각
4. adapter out 안에는 infrastrcture에 해당하는 엔티티와 레포지토리가 있어야 함
5. Jpa Member Entity가 있어야 함
6. 이 다음 MemberRepository가 생성
7. port in 과 application in 이 필요
8. port in 에는 MemberUseCase 필요
9. port안에 서비스 로직이 필요
## 궁금한거
- 헥사고날 아키텍처가 되어야 도메인과 엔티티를 어느 정도 구분할 수 있는 듯? 

