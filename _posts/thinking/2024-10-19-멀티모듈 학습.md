---
title: 멀티모듈
categories:
  - Spring
tags: 
toc: true
toc_sticky: true
date: 2024-10-19
posting: true
---
# 멀티 모듈 프로젝트란?
- Java 모듈에서 패키지 한 단계 위의 집합체를 의미, 관련된 패키지와 리소스를 재사용 할 수 있는 그룹
- 독립적으로 배포될 수 있는 코드의 단위
- 모놀리틱 아키텍처에서 코드를 모듈화하여 유지보수와 관리를 용이하게 하기 위한 구조

## 역할
- 멀티 모듈의 역할은 의존성 분리를 통해 시스템 분리와 통합을 유연하게 만들어주는 좋은 아키텍쳐
- 이를 활용해 역할과 의존성을 잘 분리할 수 있도록 함 모놀리틱과 MSA간 전환이 용이해야 좋은 아키텍처

# WHY, 사용하는 걸까?
우선 싱글 모듈 멀티 프로젝트에 대해 알아보자

**싱글 모듈 멀티 프로젝트**
![](https://i.imgur.com/aWYwMCf.png)

회원 시스템을 만들 시 별도의 프로젝트로 구성이 되어 있으므로 `MEMBER` 도메인에 대해 3가지의 코드를 모두 작성을 하므로 <mark style="background: #FFF3A3A6;">중복되는 코드</mark>가 많이 발생할 것이다. 

그리고 코드를 수정하게 되면 결국은 다르게 변화할 가능성이 높고 이런 상황이 온다면, 유지보수 측면에서 어려워 질 것이다. 

**멀티 모듈 싱글 프로젝트**
![](https://i.imgur.com/U3dK46H.png)


멀티 모듈 아키텍처는 하나의 프로젝트에서 <mark style="background: #FFB86CA6;">모듈</mark>을 여러개로 분리하여 관리하는 방법이다. 

이 방식은 코드 일관성을 시스템으로 관리할 수 있으며, 공통 코드가 수정 시에도 별도의 빌드/배포 사이클은 필요하지 않다. 
중복된 공통 코드를 분리하는 관점에서 멀티 모듈 사용이 케이스이다. 


# HOW, 사용할까?

[# 실전! 멀티 모듈 프로젝트 구조와 설계 | 인프콘 2022](https://www.youtube.com/watch?v=ipDzLJK-7Kc&t=275s) 영상을 참고했습니다.
![](https://i.imgur.com/GanVZ4b.png)

> INFCON2022멀티 모듈 프로젝트 구조와 설계를 시청 후 아직 어떻게 사용할 지 몰라서 간단히 정리만 하려한다.

- 중복을 제거하기 위해  CORE & COMMON 기능을 추가하는데 이는 결국 의존적인 구조를 불러 일으킨다.
	1. Too Many Connections 
	2. NoClassDefFoundError -> 특정한 모뮬이 하위 버전 라이브러리를 참조하는 경우 업그레이드 난해함
	3. Copy & Paste -> 참조하는 곳이 많아서 `if-else` 분기 처리를 해야하는 경우가 생김
	4. All build & Deploy 가 발생

> 🧐  멀티 모듈의 프로젝트를 나눈 기준이 적절하지 않다면 위와 같은 사례가 비슷하게 나타날 것 

### 무엇을 기준으로 나누는게 좋을까?
**멀티 모듈 그룹 분리하기**
![](https://i.imgur.com/ZhMn1Pi.png)

중요 포인트는 역할, 책임, 협력 관계가 올바른지 확인하는것 같다. 그리고 DDD의 Bounded Context 인 경계안에서 의미를 갖을 수 있는 그룹을 정의하는 것

> 🧑🏻‍💻 지금은 이 글에서 마무리하고 멀티모듈 프로젝트를 직접 구현하면서 정리한 후 작성해야겠다. 

